<!DOCTYPE html >
<!-- saved from url=(0033)https://nj.sydc.anjuke.com/sp-zu/ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title></title>

    <meta name="keywords" content="海洋房地产—南京商铺大放送">
    <meta name="description" content="海洋房地产—南京商铺!">

    <link rel="stylesheet" rev="stylesheet" href="css/sp-list.css" type="text/css">

</head>

<body>

<div class="header-center  ">
</div>
<!-- 顶部导航栏 -->
<div class="topbar ">
    <div class="header-center clearfix">

        <div id="userbox" class="user">
            <!-- 用户登录 -->
            <div class="userlogin userblock">
                <i class="icon icon-people"></i>
                <a class="link" href="shoplogin.html" rel="nofollow">登录</a>
                <a class="link" href="shopreg.html" rel="nofollow">注册</a>
            </div>
        </div>
    </div>
</div>
<!-- topbar -->
<div class="header header-center clearfix">
    <!--<a class="logo" href="#" title="海洋租房">海洋租房</a>-->
    <a class="logo-site">商铺写字楼</a>
    <!-- 城市选择start -->
    <div class="cityselect">
        <div id="switch_" class="city-view">

        </div>

    </div>
    <!-- 城市选择end -->
    <!--  搜索bar start -->
    <form class="search-form" id="search-form" action="http://localhost:8080/shopIndex.html" target="_self"
          method="post">

        <input type="text" class="searchbar-rent" id="keyword" placeholder="请输入房源特征、地址、小区、楼盘名或…" autocomplete="off"
               maxlength="100" value="">
        <input type="button" id="search-button" class="searchbar-button" hidefocus="true" value="搜索"
               onclick="seacherLike()">
        <!--<i id="search-close" class="icon icon-close" data-tracker="delete-kw" style="display:none"></i>-->
        <div class="auto-wrap"></div>
    </form>

</div>

<!-- 分类导航栏 -->
<div class="nav header-center clearfix">
    <ul>
        <li>
            <a href="shopIndex.html" target="_blank">
                商铺出租
            </a>
        </li>
        <li>
            <a href="houseIndex.html" target="_blank">
                房屋出租
            </a>
        </li>
        <li>
            <a href="shopinit.html" target="_blank">
                求租信息
            </a>
        </li>
    </ul>
</div>



<!-- 身体start -->
<div class="container">
    <!-- 面包屑组件 -->
    <div class="p_1180 p_crumbs">

    </div>
    <!-- 筛选区域start -->
    <div class="items-list">
        <div class="items-mod">
            <!--地区选择-->
            <div class="items">
                <label class="item-title">区域：</label>

                <div class="elems-l">
                    <tr>
                        <td>
                            <div class="control-group" >
                                <div class="controls">
                                    <div data-toggle="distpicker">
                                        <div class="form-group area" style="display:inline">
                                            <select class="form-control" id="province1" onchange="getChange()"></select>
                                        </div>
                                        <div class="form-group area" style="display:inline">
                                            <select class="form-control" id="city1" onchange="getChange()"></select>
                                        </div>
                                        <div class="form-group area" style="display:inline">
                                            <select class="form-control" id="district1" onchange="getChange()"></select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </div>
            </div>
            <!--面积选择-->
            <form id="" >
                <div class="items">
                    <label class="item-title" >面积：</label>
                    <div class="elems-l">
                        <!-- 选中状态 class="selected-item" 默认是'全部' -->
                        <a href="#" rel="nofollow" class="selected-item" onclick="getChange()">
                            不限
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            20平米以下
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            20-50平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            50-100平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            100-150平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            150-200平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            200-500平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            500-1000平米
                        </a>
                        <a href="#" rel="nofollow" onclick="getArea()">
                            1000平米以上
                        </a>

                        <!--<div class="cond">-->
                            <!--&lt;!&ndash;两个输入框的长度width需要在加载时传入参数计算：数字长度小于等于3位时，width:24px；数字长度n大于3位时，width: 8*n px&ndash;&gt;-->

                            <!--<form action="https://nj.sydc.anjuke.com/sp-zu/" id="area_range_form" onsubmit="">-->
                                <!--<input type="hidden" name="from_price" value="">-->
                                <!--<input type="hidden" name="to_price" value="">-->
                                <!--<input id="from_area" class="to-area yell" type="text" name="from_area" maxlength="5"-->
                                       <!--autocomplete="off" style="width:24px;" value="">-->
                                <!-- - -->
                                <!--<input id="to_area" class="to-area yell" type="text" name="to_area" maxlength="5"-->
                                       <!--autocomplete="off" value="" style="width:24px;">&nbsp;-->
                                <!--<span class="">平米</span>-->
                                <!--<input class="smit" id="arearange_search" style="" type="button" value="确定">-->
                            <!--</form>-->
                        <!--</div>-->
                    </div>
                </div>
                <!--租金选择-->
                <div class="items">
                    <label class="item-title">月租金：</label>
                    <div class="elems-l">
                        <!-- 选中状态 class="selected-item" 默认是'全部' -->
                        <a rel="nofollow" class="selected-item" onclick="getChange()">不限</a>
                        <a rel="nofollow" onclick="getPrice()">5000元以下</a>
                        <a rel="nofollow" onclick="getPrice()">5000-8000元</a>
                        <a rel="nofollow" onclick="getPrice()">8000-10000元</a>
                        <a rel="nofollow" onclick="getPrice()">10000-15000元</a>
                        <a rel="nofollow" onclick="getPrice()">15000-20000元</a>
                        <a rel="nofollow" onclick="getPrice()">20000-50000元</a>
                        <a rel="nofollow" onclick="getPrice()">50000元以上</a>
                        <!--<div class="cond">-->
                            <!--&lt;!&ndash;两个输入框的长度width需要在加载时传入参数计算：数字长度小于等于3位时，width:24px；-->
                                            <!--数字长度n大于3位时，width: 8*n px&ndash;&gt;-->

                            <!--<form action="https://nj.sydc.anjuke.com/sp-zu/" id="month_price_range_form" onsubmit="">-->
                                <!--<input id="month_from_price" class="to-area yell" type="text" name="from_price"-->
                                       <!--maxlength="5" autocomplete="off" style="width:24px;" value=""> - -->
                                <!--<input id="month_to_price" class="to-area yell" type="text" name="to_price" maxlength="5"-->
                                       <!--autocomplete="off" value="" style="width:24px;">&nbsp;-->
                                <!--<span class="">万元</span>-->
                                <!--<input type="hidden" name="from_area" value="">-->
                                <!--<input type="hidden" name="to_area" value="">-->
                                <!--<input class="smit" id="month_pricerange_search" style="" type="button" value="确定">-->
                            <!--</form>-->
                        <!--</div>-->
                    </div>
                </div>
            </form>
        </div>
    </div>
    <input type="hidden" id="areaShop">

    <div class="layout">
        <div class="list-content" id="list-content">
            <!-- 列表排序 -->
            <div class="list-sort">
                <span class="tit">为您找到以下商铺</span>
            </div>
            <!-- 商铺出租列表 -->
            <!--商铺列表容器-->
            <div id="parent-content">
                <div class="list-item" style="position: relative;">
                    <img src="img/220x165c.jpg" class="item-img" width="180" height="135">
                    <div class="icon-wrapper">
                    </div>
                    <dl class="item-info">
                        <dt class="iteidm-title" titidle="千峰酒吧街区160平大开间门面"><a
                                style="font-size: 25px;font-weight: bolder;color: green" href="shopInfoMessage.htmlshopInfo.html?id="
                                +item.id>千峰酒吧街区160平大开间门面</a></dt>
                        <dd>
                            <span>160 平米</span>
                            <i class="line">|</i>
                            <span>押一付三</span>
                            <i class="line">|</i>
                            <span>商业街店铺</span>
                        </dd>
                        <dd>毛总</dd>
                    </dl>
                    <div class="item-price">
                        <div class="price-a">
                            <em>3.7 </em>万/月
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--翻页-->
        <div class="page-content">
            <div class="multi-page">
                <div class="pagination">
                   <!-- <a href="#">&lt;上一页</a>
                    <a href="#">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">下一页 &gt;</a>-->
                </div>
            </div>
        </div>
    </div>

</div>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="js/plugins/citypicker/distpicker.data.js"></script>
<script type="text/javascript" src="js/plugins/citypicker/distpicker.js"></script>

<script>

    // $("#province1").bind("change",
    //     function(){
    //         var province=$("#province1").val();
    //     }
    // );
    // 地区查找
    var myVar;
    function getChange() {
        myVar = setTimeout(f, 200);
    }
    function f() {
        console.log( $("#province1 option:selected").val())
        console.log( $("#city1 option:selected").val())
        console.log( $("#district1 option:selected").val())
        var requestURL = "/shop/getShopLocation";
        $.ajax({
            //请求方式GET/POST
            type : "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //接受数据类型
            dataType:"json",
            //请求地址
            url : requestURL,
            //数据，json字符串
            data:JSON.stringify({
                "provinceId":$("#province1 option:selected").val(),
                "cityId":$("#city1 option:selected").val(),
                "areaId":$("#district1 option:selected").val()
            }),
            //请求成功
            success: function (result) {
                console.log(result);

                //将分页清空
                $(".multi-page").empty();

                //清空html内容
                var tdStr = "";
                $(result).each(function (index, item) {
                    //获取id并拼接
                    tdStr += "<div class='list-item' style='position: relative;'>";
                    tdStr += "<img src=\""+item.icon+"\" class=\"item-img\" width=\"180\" height=\"135\">";
                    tdStr += "<div class=\"icon-wrapper\">";
                    tdStr += "</div>";
                    tdStr += "<dl class=\"item-info\">";
                    tdStr += "<dt class=\"item-title\"><a style=\"font-size: 25px;font-weight: bolder;color: green\" href=\"shopInfoMessage.html?id=" + item.id + "\">" + item.title + "</a></dt>";
                    tdStr += "<dd>";
                    tdStr += "<span class=\"item-area\">" + item.area + "</span>" + "平米";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"pay_type\">" + item.pay_type + "</span>";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"shopType\">" + item.shopType + "</span>";
                    tdStr += "</dd>";
                    tdStr += "<dd>" + item.landName + "</dd>";
                    tdStr += "</dl>";
                    tdStr += "<div class=\"item-price\">";
                    tdStr += "<div class=\"price-a\">";
                    tdStr += "<em class=\"priceMonth\">" + item.price + "</em>元/月";
                    tdStr += "</div>";
                    tdStr += "</div>";
                    tdStr += "</div>";
                });
                //拼接内容
                $("#parent-content").html(tdStr);
                //清空分页
                $(".multi-page").empty();

            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    }

    //面积查询
    function getArea() {

        var area = window.event.target.text
        area = area.trim()
        console.log(area)
        var requestURL = "/shop/listShopInfoByConditions";
        $.ajax({
            type: "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            url: requestURL,
            data:JSON.stringify({
                "area":area,
                "provinceId":$("#province1 option:selected").val(),
                "cityId":$("#city1 option:selected").val(),
                "areaId":$("#district1 option:selected").val()
            }),
            success: function (result) {
                console.log(result);

                //将分页清空
                $(".multi-page").empty();

                //清空html内容
                var tdStr = "";
                $(result).each(function (index, item) {
                    //获取id并拼接
                    tdStr += "<div class='list-item' style='position: relative;'>";
                    tdStr += "<img src=\""+item.icon+"\" class=\"item-img\" width=\"180\" height=\"135\">";
                    tdStr += "<div class=\"icon-wrapper\">";
                    tdStr += "</div>";
                    tdStr += "<dl class=\"item-info\">";
                    tdStr += "<dt class=\"item-title\"><a style=\"font-size: 25px;font-weight: bolder;color: green\" href=\"shopInfoMessage.html?id=" + item.id + "\">" + item.title + "</a></dt>";
                    tdStr += "<dd>";
                    tdStr += "<span class=\"item-area\">" + item.area + "</span>" + "平米";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"pay_type\">" + item.pay_type + "</span>";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"shopType\">" + item.shopType + "</span>";
                    tdStr += "</dd>";
                    tdStr += "<dd>" + item.landName + "</dd>";
                    tdStr += "</dl>";
                    tdStr += "<div class=\"item-price\">";
                    tdStr += "<div class=\"price-a\">";
                    tdStr += "<em class=\"priceMonth\">" + item.price + "</em>元/月";
                    tdStr += "</div>";
                    tdStr += "</div>";
                    tdStr += "</div>";
                });
                //拼接内容
                $("#parent-content").html(tdStr);
                //清空分页
                $(".multi-page").empty();
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.error(e);
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    }

    //价格查询
    function getPrice(){
        //获取地区下拉框的值

        var price = window.event.target.text
        console.log(price)
        var requestURL = "/shop/listShopInfoByConditions";
        $.ajax({
            type: "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            url: requestURL,
            data:JSON.stringify({
                "price":price,
                "provinceId":$("#province1 option:selected").val(),
                "cityId":$("#city1 option:selected").val(),
                "areaId":$("#district1 option:selected").val()
            }),
            success: function (result) {
                console.log(result);

                //将分页清空
                $(".multi-page").empty();
                //清空html内容
                var tdStr = "";
                $(result).each(function (index, item) {
                    //获取id并拼接
                    tdStr += "<div class='list-item' style='position: relative;'>";
                    tdStr += "<img src=\""+item.icon+"\" class=\"item-img\" width=\"180\" height=\"135\">";
                    tdStr += "<div class=\"icon-wrapper\">";
                    tdStr += "</div>";
                    tdStr += "<dl class=\"item-info\">";
                    tdStr += "<dt class=\"item-title\"><a style=\"font-size: 25px;font-weight: bolder;color: green\" href=\"shopInfoMessage.html?id=" + item.id + "\">" + item.title + "</a></dt>";
                    tdStr += "<dd>";
                    tdStr += "<span class=\"item-area\">" + item.area + "</span>" + "平米";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"pay_type\">" + item.pay_type + "</span>";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"shopType\">" + item.shopType + "</span>";
                    tdStr += "</dd>";
                    tdStr += "<dd>" + item.landName + "</dd>";
                    tdStr += "</dl>";
                    tdStr += "<div class=\"item-price\">";
                    tdStr += "<div class=\"price-a\">";
                    tdStr += "<em class=\"priceMonth\">" + item.price + "</em>元/月";
                    tdStr += "</div>";
                    tdStr += "</div>";
                    tdStr += "</div>";
                });
                $("#parent-content").html(tdStr);
                //将分页清空
                $(".multi-page").empty();

            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.error(e);
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    }

    //清空页面div中的原始数据
    //初始化页面
    function initPage() {
        //获取下拉框的值
        var pageNum = window.location.search.split("=")[1];
        var requestURL = "/shop/listAllShopInfo";
        if (pageNum != null) {
            requestURL += "?pageNum=" + pageNum;
        }
        //1.从后台的 listAllShopInfo接口获取数据
        $.ajax({
            type: "GET",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            url: requestURL,
            success: function (result) {
                console.log(result);
                //清空html内容
                var tdStr = "";
                $(result.list).each(function (index, item) {
                    //获取id并拼接
                    tdStr += "<div class='list-item' style='position: relative;'>";
                    tdStr += "<img src=\""+item.icon+"\" class=\"item-img\" width=\"180\" height=\"135\">";
                    tdStr += "<div class=\"icon-wrapper\">";
                    tdStr += "</div>";
                    tdStr += "<dl class=\"item-info\">";
                    tdStr += "<dt class=\"item-title\"><a style=\"font-size: 25px;font-weight: bolder;color: green\" href=\"shopInfoMessage.html?id=" + item.id + "\">" + item.title + "</a></dt>";
                    tdStr += "<dd>";
                    tdStr += "<span class=\"item-area\">" + item.area + "</span>" + "平米";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"pay_type\">" + item.pay_type + "</span>";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"shopType\">" + item.shopType + "</span>";
                    tdStr += "</dd>";
                    tdStr += "<dd>" + item.landName + "</dd>";
                    tdStr += "</dl>";
                    tdStr += "<div class=\"item-price\">";
                    tdStr += "<div class=\"price-a\">";
                    tdStr += "<em class=\"priceMonth\">" + item.price + "</em>元/月";
                    tdStr += "</div>";
                    tdStr += "</div>";
                    tdStr += "</div>";
                });
                $("#parent-content").html(tdStr);
                //拼接分页
                var splitePageStr = "<a href=\"#\">&lt;上一页</a>";
                for (var i = 1; i <= result.pages; i++) {
                    splitePageStr += "<a href=\"shopIndex.html?pageNum=" + i + "\">" + i + "</a>";
                }
                splitePageStr += "<a href=\"#\">下一页 &gt;</a>";
                $(".pagination").html(splitePageStr);
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.error(e);
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    }

    initPage();

    var pageNum;
    //搜索框的模糊查询
    function seacherLike(data) {
        //获取地区下拉框的值
        var keyword = $("#keyword").val();
        //获取搜索框的值
        if (data == null || data == undefined){
            data = {
                "pageNum":1,
                "keyword":keyword
            };
        }
        var requestURL = "shop/listAllShopInfoByLike";
        $.ajax({
            //请求方式GET/POST
            type: "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //接受数据类型
            dataType: "json",
            data:JSON.stringify(data),
            //请求地址
            url: requestURL,
            success: function (result) {
                //打印返回结果
                console.log(result);
                //返回的是对象
                var tdStr = "";
                $(result.list).each(function (index, item) {
                    //获取id并拼接
                    tdStr += "<div class='list-item' style='position: relative;'>";
                    tdStr += "<img src=\""+item.icon+"\" class=\"item-img\" width=\"180\" height=\"135\">";
                    tdStr += "<div class=\"icon-wrapper\">";
                    tdStr += "</div>";
                    tdStr += "<dl class=\"item-info\">";
                    tdStr += "<dt class=\"item-title\"><a style=\"font-size: 25px;font-weight: bolder;color: green\" href=\"shopInfoMessage.html?id=" + item.id + "\">" + item.title + "</a></dt>";
                    tdStr += "<dd>";
                    tdStr += "<span class=\"item-area\">" + item.area + "</span>" + "平米";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"pay_type\">" + item.pay_type + "</span>";
                    tdStr += "<i class=\"line\">|</i>";
                    tdStr += "<span class=\"shopType\">" + item.shopType + "</span>";
                    tdStr += "</dd>";
                    tdStr += "<dd>" + item.landName + "</dd>";
                    tdStr += "</dl>";
                    tdStr += "<div class=\"item-price\">";
                    tdStr += "<div class=\"price-a\">";
                    tdStr += "<em class=\"priceMonth\">" + item.price + "</em>元/月";
                    tdStr += "</div>";
                    tdStr += "</div>";
                    tdStr += "</div>";
                });
                //2.将数据填充到div中
                $("#parent-content").html(tdStr);
                //拼接分页

                var splitPageStr = "<a onclick='seacherLike(" + getData(result.prePage) + ")'>上一页</a>"
                for (var i = 1; i <= result.pages; i++) {
                    splitPageStr += "<a onclick='seacherLike(" + getData(i) + ")'>" + i + "</a>";
                }
                splitPageStr += "<a onclick='seacherLike(" + getData(result.nextPage) + ")'>下一页</a>"
                $(".multi-page").html(splitPageStr);
                // if (result.isFirstPage) {
                //     $("#prePage").addClass("disabled");
                //     $("#prePage a").removeAttr("onclick");
                // }
                // if (result.isLastPage) {
                //     $("#nextPage").addClass("disabled");
                //     $("#nextPage a").removeAttr("onclick");
                // }
                // $("#pageNum" + result.pageNum).addClass("active");
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log("模糊查询，发生错误")
                console.error(e);
                console.log(e.status);
                console.log(e.responseText);
            }
        });

        function getData(arg) {
            var data = "{pageNum : " + arg + "," +
                "keyword : \"" + $("#keyword").val() + "\"}";
            console.log(data);
            return data;
        }
    }
</script>
</body>
</html>